

\subsection{Producing the activity plan}

The problem of our itinerary planner algorithm
is mathematically formulated as follows. A tourist trip is made up
of some pre-defined user constants alongside the travel interest
vector. The predefined constants are:
\\
\input{Methodology/maths.tex}

\input{Methodology/psoAlgorithm.tex}

%\subsubsection{}
\subsubsection{Optimisation Algorithms}

PSO and GAs are two meta-heuristics that use a population
to converge to a fit solution. Therefore, they require
an initial random generation of possible timetables. In
our algorithm, we introduce a method of randomisation
bias. With this technique, the randomness of the initial
population is weighted based on the place's rating and 
the place's number of ratings. This bias gives a 
head start to the algorithm rather than just starting 
optimising from purely random itineraries, highly likely 
to be of bad quality.

%\input{sections/methodology/psoAlgorithm.tex}


%\paragraph{Particle Swarm Optimisation}

In PSO, the whole population is referred to as the
swarm, whilst a single member a particle in this case representing a timetable
solution. Each particle uses its current position, personal best and global best
to calculate its new position. After a few iterations have passed, particles use
their velocity and move towards the optimum position.
We demonstrate the framework of our PSO algorithm in
algorithm \ref{PSOAlgorithm}.


%\paragraph{Genetic Algorithms}

Genetics algorithms use biological terms to describe
their attributes. For example, a timetable solution in
population is referred to as a chromosome~\cite{Abbaspour2011}. 

In PSO, the algorithm optimises by allowing each
particle to move closer to the global best every
iteration. In comparison, in GAs, first, the best
chromosomes known as the elites are selected from each
iteration. Then, three techniques, namely selection,
mutation, and crossover, are applied to generate the
next population.

We used the geneticalgorithm2 package~\footnote{https://pypi.org/project/geneticalgorithm2/},
which allowed us to use the same score function and
the random bias to initialise the particles. The
algorithm has 7 parameters. The parents portion
represents the number of parents who will reproduce
and create the next generation. The mutation
probability determines the chance a POI in a
chromosome will be replaced by a random value to which
the algorithm will converge less quickly and explore
more of the search space. The crossover probability
will affect the chance that part of its solution goes
to the child. Finally, the elite ratio determines how
much of the best chromosomes in an iteration make it
to the next iteration.  There are many types of
crossovers techniques. In this algorithm, we
explored \textit{one point, two point, uniform and shuffle crossover}.  The algorithm produced the following
steps: \\
\textbf{Step 1}: Initialise the first population using random bias. \\
\textbf{Step 2}: Select the best chromosomes from the population. \\ 
\textbf{Step 3}: Select the elite particles that will make it to the next iteration.\\
\textbf{Step 3}: Apply Crossover, Mutation and Selection on the population. \\
\textbf{Step 4}: Check if the number of iterations has exceeded. 


